<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Orders</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
<div class="container p-4">
    <h2 class="heading-font">Your Orders</h2>
    
    {% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="alert alert-success">
      {{ messages[0] }}
    </div>
  {% endif %}
{% endwith %}

    {% if orders %}
      <table class="table table-dark table-striped mt-4">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Address</th>
            <th>Region</th>
            <th>Package</th>
            <th>Price</th>
            <th>Shipping</th>
            <th>Total</th>
            <th>Created At</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
          <tr>
            <td>{{ order['id'] }}</td>
            <td>{{ order['customer_name'] }}</td>
            <td>{{ order['delivery_address'] }}</td>
            <td>{{ order['region'] }}</td>
            <td>{{ order['package_name'] }}</td>
            <td>{{ order['package_price'] }} GYD</td>
            <td>{{ order['shipping_cost'] }} GYD</td>
            <td>{{ order['total_price'] }} GYD</td>
            <td>{{ order['created_at'] }}</td>
            <td>
            <td>
            <a href="{{ url_for('edit_order', order_id=order['id']) }}" class="btn btn-danger btn-sm">Edit</a>
            <form method="POST" action="{{ url_for('cancel_order', order_id=order['id']) }}" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm">Cancel</button>  
            </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No orders found. Place an order first!</p>
    {% endif %}
  </div>
  <div class="text-center" style="margin-top: 30px;">
  <a href="{{ url_for('home') }}" class="btn btn-return btn-sm">Return Home</a>
  </div>
   
</body>
</html>

